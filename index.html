<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amplarii Communication Intelligence Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .logo {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .nav-tab {
            padding: 10px 20px;
            border: none;
            background: #f8f9fa;
            color: #666;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .nav-tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            background: white;
            cursor: pointer;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .question-container {
            margin-bottom: 30px;
        }
        
        .question {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.4;
        }
        
        .options {
            display: grid;
            gap: 15px;
        }
        
        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }
        
        .option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .option-text {
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .option-desc {
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-secondary {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e9ecef;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .result-container {
            text-align: center;
            display: none;
        }
        
        .signature-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .signature-title {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .signature-archetype {
            font-size: 1.2em;
            font-style: italic;
            opacity: 0.9;
        }
        
        .dimension-scores {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .dimension {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .dimension-name {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .dimension-score {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .service-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .service-card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .service-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .service-price {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin: 15px 0;
        }
        
        .service-features {
            list-style: none;
            margin: 20px 0;
            color: #666;
        }
        
        .service-features li {
            margin: 8px 0;
        }
        
        .service-features li:before {
            content: "âœ“ ";
            color: #28a745;
            font-weight: bold;
        }
        
        .profile-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2em;
            font-weight: bold;
        }
        
        .profile-info h3 {
            color: #333;
            margin-bottom: 5px;
        }
        
        .profile-info p {
            color: #666;
        }
        
        .hidden {
            display: none !important;
        }
        
        .text-center {
            text-align: center;
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        
        .close-modal {
            float: right;
            font-size: 1.5em;
            cursor: pointer;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">Amplarii</div>
            <div class="subtitle">Communication Intelligence Platform</div>
            
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('profile')">Profile</button>
                <button class="nav-tab" onclick="showTab('assessment')">Assessment</button>
                <button class="nav-tab" onclick="showTab('services')">Services</button>
                <button class="nav-tab" onclick="showTab('results')" id="resultsTab" style="display: none;">Results</button>
            </div>
        </div>
        
        <!-- Profile Tab -->
        <div class="tab-content active" id="profileTab">
            <div id="profileForm">
                <h3 class="text-center" style="margin-bottom: 30px;">Create Your Profile</h3>
                
                <div class="form-group">
                    <label class="form-label">Full Name *</label>
                    <input type="text" class="form-input" id="fullName" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email Address *</label>
                    <input type="email" class="form-input" id="email" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Job Title</label>
                    <input type="text" class="form-input" id="jobTitle" placeholder="e.g., Marketing Manager">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Company/Organization</label>
                    <input type="text" class="form-input" id="company" placeholder="Your company name">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Industry</label>
                    <select class="form-select" id="industry">
                        <option value="">Select Industry</option>
                        <option value="technology">Technology</option>
                        <option value="healthcare">Healthcare</option>
                        <option value="education">Education</option>
                        <option value="finance">Finance</option>
                        <option value="retail">Retail</option>
                        <option value="manufacturing">Manufacturing</option>
                        <option value="consulting">Consulting</option>
                        <option value="non-profit">Non-Profit</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Team Size</label>
                    <select class="form-select" id="teamSize">
                        <option value="">Select Team Size</option>
                        <option value="1">Just Me</option>
                        <option value="2-5">2-5 People</option>
                        <option value="6-15">6-15 People</option>
                        <option value="16-50">16-50 People</option>
                        <option value="51-200">51-200 People</option>
                        <option value="200+">200+ People</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <div class="checkbox-group">
                        <input type="checkbox" id="emailUpdates">
                        <label for="emailUpdates">Send me communication tips and updates</label>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="saveProfile()" style="width: 100%; margin-top: 20px;">
                    Save Profile
                </button>
            </div>
            
            <div id="profileDisplay" class="hidden">
                <div class="profile-card">
                    <div class="profile-header">
                        <div class="profile-avatar" id="profileAvatar">JD</div>
                        <div class="profile-info">
                            <h3 id="displayName">John Doe</h3>
                            <p id="displayTitle">Marketing Manager at TechCorp</p>
                            <p id="displayIndustry">Technology â€¢ 16-50 People</p>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="editProfile()">Edit Profile</button>
                </div>
            </div>
        </div>
        
        <!-- Assessment Tab -->
        <div class="tab-content" id="assessmentTab">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <div class="assessment-container" id="assessmentContainer">
                <div class="question-container">
                    <div class="question" id="questionText">Take the assessment to discover your communication signature</div>
                    <div class="options" id="optionsContainer">
                        <p class="text-center" style="color: #666; margin: 40px 0;">
                            Complete your profile first, then begin the 33-question assessment to discover your unique communication signature.
                        </p>
                    </div>
                </div>
                
                <div class="navigation">
                    <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()" disabled>Previous</button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>Next</button>
                </div>
            </div>
        </div>
        
        <!-- Services Tab -->
        <div class="tab-content" id="servicesTab">
            <h3 class="text-center" style="margin-bottom: 30px;">Premium Services</h3>
            
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-title">Team Assessment</div>
                    <div class="service-price">$49</div>
                    <ul class="service-features">
                        <li>Up to 10 team members</li>
                        <li>Team dynamics report</li>
                        <li>Communication matrix</li>
                        <li>Conflict resolution guide</li>
                        <li>30-day email support</li>
                    </ul>
                    <button class="btn btn-primary" onclick="purchaseService('team-assessment', 49)">Purchase</button>
                </div>
                
                <div class="service-card">
                    <div class="service-title">1-on-1 Coaching</div>
                    <div class="service-price">$149</div>
                    <ul class="service-features">
                        <li>60-minute personalized session</li>
                        <li>Custom communication plan</li>
                        <li>Signature optimization strategies</li>
                        <li>Follow-up resources</li>
                        <li>Recording included</li>
                    </ul>
                    <button class="btn btn-primary" onclick="purchaseService('coaching-session', 149)">Purchase</button>
                </div>
                
                <div class="service-card">
                    <div class="service-title">Enterprise Report</div>
                    <div class="service-price">$299</div>
                    <ul class="service-features">
                        <li>Unlimited team members</li>
                        <li>Department-level analysis</li>
                        <li>Leadership communication audit</li>
                        <li>Custom training recommendations</li>
                        <li>Quarterly progress reviews</li>
                    </ul>
                    <button class="btn btn-primary" onclick="purchaseService('enterprise-report', 299)">Purchase</button>
                </div>
            </div>
        </div>
        
        <!-- Results Tab -->
        <div class="tab-content" id="resultsTabContent">
            <div class="result-container">
                <h2>Your Communication Signature</h2>
                <div class="signature-card">
                    <div class="signature-title" id="signatureTitle"></div>
                    <div class="signature-archetype" id="signatureArchetype"></div>
                </div>
                
                <div class="dimension-scores" id="dimensionScores"></div>
                
                <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                    <button class="btn btn-secondary" onclick="restartAssessment()">Retake Assessment</button>
                    <button class="btn btn-primary" onclick="showTab('services')">Explore Services</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closePaymentModal()">&times;</span>
            <h3 id="serviceTitle">Service Purchase</h3>
            <p id="serviceDescription">Complete your purchase below</p>
            <div style="margin: 20px 0;">
                <strong>Total: $<span id="servicePrice">0</span></strong>
            </div>
            
            <div class="form-group">
                <label class="form-label">Card Number</label>
                <input type="text" class="form-input" placeholder="1234 5678 9012 3456" maxlength="19">
            </div>
            
            <div style="display: flex; gap: 15px;">
                <div class="form-group" style="flex: 1;">
                    <label class="form-label">Expiry</label>
                    <input type="text" class="form-input" placeholder="MM/YY" maxlength="5">
                </div>
                <div class="form-group" style="flex: 1;">
                    <label class="form-label">CVV</label>
                    <input type="text" class="form-input" placeholder="123" maxlength="3">
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="processPayment()" style="width: 100%; margin-top: 20px;">
                Complete Purchase
            </button>
        </div>
    </div>

    <script>
        // Assessment Questions (same as before)
        const questions = [
            // Human Drive Patterns (8 questions)
            {
                dimension: "drive",
                text: "When starting a new project, what drives you most?",
                options: [
                    { text: "Getting quick, concrete results", desc: "I want to see immediate progress and outcomes", value: "action" },
                    { text: "Understanding all the details first", desc: "I need to research and plan thoroughly", value: "research" },
                    { text: "Building consensus with the team", desc: "I want everyone aligned and committed", value: "collaborate" },
                    { text: "Finding the most efficient approach", desc: "I focus on optimizing the process", value: "optimize" }
                ]
            },
            {
                dimension: "drive",
                text: "In high-pressure situations, you typically:",
                options: [
                    { text: "Take charge and make quick decisions", desc: "I step up and lead when things get intense", value: "action" },
                    { text: "Analyze the situation carefully", desc: "I gather information before acting", value: "research" },
                    { text: "Check in with others for input", desc: "I value team perspectives under pressure", value: "collaborate" },
                    { text: "Look for the most logical solution", desc: "I find the systematic approach", value: "optimize" }
                ]
            },
            {
                dimension: "drive",
                text: "Your ideal work environment is:",
                options: [
                    { text: "Fast-paced with lots of variety", desc: "I thrive with constant change and challenges", value: "action" },
                    { text: "Quiet with time for deep thinking", desc: "I need space to focus and analyze", value: "research" },
                    { text: "Collaborative with open communication", desc: "I work best with team interaction", value: "collaborate" },
                    { text: "Structured with clear processes", desc: "I prefer organized, systematic approaches", value: "optimize" }
                ]
            },
            {
                dimension: "drive",
                text: "When learning something new, you prefer to:",
                options: [
                    { text: "Jump in and learn by doing", desc: "I learn best through hands-on experience", value: "action" },
                    { text: "Study the theory first", desc: "I want to understand the concepts deeply", value: "research" },
                    { text: "Learn with others in a group", desc: "I enjoy collaborative learning experiences", value: "collaborate" },
                    { text: "Follow a structured curriculum", desc: "I like step-by-step learning paths", value: "optimize" }
                ]
            },
            {
                dimension: "drive",
                text: "Your approach to problem-solving is:",
                options: [
                    { text: "Try different solutions quickly", desc: "I experiment and iterate rapidly", value: "action" },
                    { text: "Research thoroughly before acting", desc: "I investigate all aspects first", value: "research" },
                    { text: "Brainstorm with others", desc: "I believe the best solutions come from teamwork", value: "collaborate" },
                    { text: "Use proven methodologies", desc: "I apply systematic problem-solving approaches", value: "optimize" }
                ]
            },
            {
                dimension: "drive",
                text: "What energizes you most at work?",
                options: [
                    { text: "Achieving tangible results", desc: "I'm motivated by concrete accomplishments", value: "action" },
                    { text: "Discovering new insights", desc: "I love learning and understanding deeply", value: "research" },
                    { text: "Building strong relationships", desc: "I'm energized by meaningful connections", value: "collaborate" },
                    { text: "Creating efficient systems", desc: "I enjoy optimizing and streamlining processes", value: "optimize" }
                ]
            },
            {
                dimension: "drive",
                text: "Your natural leadership style is:",
                options: [
                    { text: "Direct and decisive", desc: "I lead by making clear decisions quickly", value: "action" },
                    { text: "Thoughtful and informed", desc: "I lead through expertise and knowledge", value: "research" },
                    { text: "Inclusive and supportive", desc: "I lead by empowering and involving others", value: "collaborate" },
                    { text: "Systematic and organized", desc: "I lead through structure and processes", value: "optimize" }
                ]
            },
            {
                dimension: "drive",
                text: "When facing uncertainty, you:",
                options: [
                    { text: "Take action to create clarity", desc: "I move forward to gain more information", value: "action" },
                    { text: "Research to reduce unknowns", desc: "I gather data to understand the situation", value: "research" },
                    { text: "Seek input from others", desc: "I consult with trusted colleagues", value: "collaborate" },
                    { text: "Create contingency plans", desc: "I prepare systematic responses for different scenarios", value: "optimize" }
                ]
            },
            
            // Expression Frequencies (8 questions)
            {
                dimension: "expression",
                text: "In meetings, you typically:",
                options: [
                    { text: "Speak up frequently with ideas", desc: "I share thoughts as they come to me", value: "expressive" },
                    { text: "Listen carefully before contributing", desc: "I prefer to understand first, then speak", value: "reflective" },
                    { text: "Ask questions to understand others", desc: "I focus on drawing out different perspectives", value: "interactive" },
                    { text: "Contribute when I have something valuable to add", desc: "I speak when I can add real value", value: "purposeful" }
                ]
            },
            {
                dimension: "expression",
                text: "Your communication style is naturally:",
                options: [
                    { text: "Animated and enthusiastic", desc: "I express ideas with energy and passion", value: "expressive" },
                    { text: "Calm and measured", desc: "I communicate thoughtfully and deliberately", value: "reflective" },
                    { text: "Engaging and interactive", desc: "I love back-and-forth conversation", value: "interactive" },
                    { text: "Clear and concise", desc: "I focus on efficient, effective communication", value: "purposeful" }
                ]
            },
            {
                dimension: "expression",
                text: "When presenting ideas, you prefer to:",
                options: [
                    { text: "Share openly and get immediate feedback", desc: "I like real-time interaction and response", value: "expressive" },
                    { text: "Prepare thoroughly and present formally", desc: "I want to be well-prepared and polished", value: "reflective" },
                    { text: "Make it conversational and engaging", desc: "I turn presentations into discussions", value: "interactive" },
                    { text: "Focus on key points and outcomes", desc: "I emphasize the most important information", value: "purposeful" }
                ]
            },
            {
                dimension: "expression",
                text: "Your preferred feedback style is:",
                options: [
                    { text: "Immediate and direct", desc: "I appreciate quick, honest feedback", value: "expressive" },
                    { text: "Detailed and thoughtful", desc: "I want comprehensive, well-considered input", value: "reflective" },
                    { text: "Collaborative and supportive", desc: "I prefer feedback that feels like a conversation", value: "interactive" },
                    { text: "Specific and actionable", desc: "I want feedback that leads to clear next steps", value: "purposeful" }
                ]
            },
            {
                dimension: "expression",
                text: "In written communication, you tend to be:",
                options: [
                    { text: "Informal and spontaneous", desc: "I write as I think, naturally and openly", value: "expressive" },
                    { text: "Formal and well-structured", desc: "I craft careful, organized messages", value: "reflective" },
                    { text: "Personal and relationship-focused", desc: "I emphasize connection and understanding", value: "interactive" },
                    { text: "Brief and to-the-point", desc: "I focus on essential information only", value: "purposeful" }
                ]
            },
            {
                dimension: "expression",
                text: "When brainstorming, you:",
                options: [
                    { text: "Share ideas as they come", desc: "I contribute spontaneously and energetically", value: "expressive" },
                    { text: "Think first, then share refined ideas", desc: "I prefer to develop ideas before sharing", value: "reflective" },
                    { text: "Build on others' ideas", desc: "I love collaborative idea development", value: "interactive" },
                    { text: "Focus on practical, implementable concepts", desc: "I contribute ideas that can actually work", value: "purposeful" }
                ]
            },
            {
                dimension: "expression",
                text: "Your natural networking style is:",
                options: [
                    { text: "Open and outgoing", desc: "I easily start conversations with new people", value: "expressive" },
                    { text: "Selective and meaningful", desc: "I prefer deeper connections with fewer people", value: "reflective" },
                    { text: "Warm and relationship-building", desc: "I focus on creating genuine connections", value: "interactive" },
                    { text: "Professional and goal-oriented", desc: "I network with specific objectives in mind", value: "purposeful" }
                ]
            },
            {
                dimension: "expression",
                text: "When explaining complex topics, you:",
                options: [
                    { text: "Use analogies and stories", desc: "I make things relatable and memorable", value: "expressive" },
                    { text: "Break it down systematically", desc: "I explain step-by-step logically", value: "reflective" },
                    { text: "Check understanding frequently", desc: "I ensure others are following along", value: "interactive" },
                    { text: "Focus on practical applications", desc: "I emphasize how to use the information", value: "purposeful" }
                ]
            },
            
            // Adaptive Behaviors (8 questions)
            {
                dimension: "adaptive",
                text: "When your initial approach isn't working, you:",
                options: [
                    { text: "Try a completely different approach", desc: "I pivot quickly to new strategies", value: "flexible" },
                    { text: "Analyze what went wrong first", desc: "I want to understand before changing course", value: "analytical" },
                    { text: "Seek input from others", desc: "I get different perspectives on the situation", value: "collaborative" },
                    { text: "Adjust incrementally", desc: "I make measured changes to improve", value: "steady" }
                ]
            },
            {
                dimension: "adaptive",
                text: "Your response to unexpected changes is:",
                options: [
                    { text: "Embrace them as opportunities", desc: "I see change as exciting and full of potential", value: "flexible" },
                    { text: "Evaluate the implications carefully", desc: "I assess the impact before responding", value: "analytical" },
                    { text: "Consider how it affects everyone", desc: "I think about the human impact of changes", value: "collaborative" },
                    { text: "Find ways to maintain stability", desc: "I look for continuity within the change", value: "steady" }
                ]
            },
            {
                dimension: "adaptive",
                text: "When working with different personality types, you:",
                options: [
                    { text: "Adapt your style to match theirs", desc: "I mirror their communication preferences", value: "flexible" },
                    { text: "Observe their patterns first", desc: "I study how they work before adjusting", value: "analytical" },
                    { text: "Find common ground", desc: "I focus on shared goals and values", value: "collaborative" },
                    { text: "Maintain your authentic approach", desc: "I stay true to my natural style", value: "steady" }
                ]
            },
            {
                dimension: "adaptive",
                text: "In conflict situations, you typically:",
                options: [
                    { text: "Try different approaches to resolve it", desc: "I experiment with various resolution strategies", value: "flexible" },
                    { text: "Analyze the root causes", desc: "I dig deep to understand the real issues", value: "analytical" },
                    { text: "Focus on maintaining relationships", desc: "I prioritize preserving connections", value: "collaborative" },
                    { text: "Seek fair and consistent solutions", desc: "I look for balanced, principled resolutions", value: "steady" }
                ]
            },
            {
                dimension: "adaptive",
                text: "Your approach to learning from mistakes is:",
                options: [
                    { text: "Move on quickly and try new things", desc: "I don't dwell on errors, I keep experimenting", value: "flexible" },
                    { text: "Do a thorough post-mortem analysis", desc: "I examine what happened in detail", value: "analytical" },
                    { text: "Discuss lessons learned with others", desc: "I share insights and learn from team experiences", value: "collaborative" },
                    { text: "Create better processes to prevent recurrence", desc: "I build systems to avoid similar mistakes", value: "steady" }
                ]
            },
            {
                dimension: "adaptive",
                text: "When priorities shift suddenly, you:",
                options: [
                    { text: "Quickly reorganize and move forward", desc: "I adapt my plans immediately", value: "flexible" },
                    { text: "Assess the impact on current work", desc: "I evaluate how changes affect existing commitments", value: "analytical" },
                    { text: "Communicate changes clearly to all stakeholders", desc: "I ensure everyone understands the new direction", value: "collaborative" },
                    { text: "Find ways to honor previous commitments", desc: "I balance new priorities with existing obligations", value: "steady" }
                ]
            },
            {
                dimension: "adaptive",
                text: "Your stress response is to:",
                options: [
                    { text: "Change your environment or approach", desc: "I alter my situation to reduce stress", value: "flexible" },
                    { text: "Break down the problem logically", desc: "I analyze stressors to understand them", value: "analytical" },
                    { text: "Seek support from others", desc: "I reach out to my network for help", value: "collaborative" },
                    { text: "Return to proven strategies", desc: "I rely on methods that have worked before", value: "steady" }
                ]
            },
            {
                dimension: "adaptive",
                text: "When leading change initiatives, you:",
                options: [
                    { text: "Model adaptability and experimentation", desc: "I demonstrate flexibility and openness to new ideas", value: "flexible" },
                    { text: "Provide data and rationale", desc: "I use analysis to build the case for change", value: "analytical" },
                    { text: "Build buy-in through involvement", desc: "I engage others in shaping the change", value: "collaborative" },
                    { text: "Ensure smooth transitions", desc: "I focus on maintaining stability during change", value: "steady" }
                ]
            },
            
            // Intelligence Engine (9 questions)
            {
                dimension: "intelligence",
                text: "Your decision-making process relies most on:",
                options: [
                    { text: "Gut instinct and intuition", desc: "I trust my inner sense of what's right", value: "intuitive" },
                    { text: "Data analysis and logic", desc: "I base decisions on facts and reasoning", value: "analytical" },
                    { text: "Input from trusted advisors", desc: "I value perspectives from people I respect", value: "social" },
                    { text: "Past experience and patterns", desc: "I draw on what has worked before", value: "experiential" }
                ]
            },
            {
                dimension: "intelligence",
                text: "When processing new information, you:",
                options: [
                    { text: "Look for patterns and connections", desc: "I see how things relate to the bigger picture", value: "intuitive" },
                    { text: "Verify sources and check facts", desc: "I evaluate credibility and accuracy", value: "analytical" },
                    { text: "Consider multiple perspectives", desc: "I seek different viewpoints on the information", value: "social" },
                    { text: "Connect it to what you already know", desc: "I relate new info to my existing knowledge", value: "experiential" }
                ]
            },
            {
                dimension: "intelligence",
                text: "Your problem-solving strength is:",
                options: [
                    { text: "Seeing innovative solutions", desc: "I generate creative, original approaches", value: "intuitive" },
                    { text: "Breaking down complex issues", desc: "I excel at systematic analysis", value: "analytical" },
                    { text: "Understanding human dynamics", desc: "I solve problems involving people and relationships", value: "social" },
                    { text: "Learning from similar situations", desc: "I apply lessons from past experiences", value: "experiential" }
                ]
            },
            {
                dimension: "intelligence",
                text: "You're most confident when:",
                options: [
                    { text: "Following your instincts", desc: "I trust my intuitive sense of direction", value: "intuitive" },
                    { text: "You have solid data to support you", desc: "I feel secure with factual backing", value: "analytical" },
                    { text: "The team is aligned and supportive", desc: "I'm strongest with group consensus", value: "social" },
                    { text: "You can draw on proven approaches", desc: "I'm confident using tested methods", value: "experiential" }
                ]
            },
            {
                dimension: "intelligence",
                text: "Your learning preference is:",
                options: [
                    { text: "Exploring possibilities and theories", desc: "I love conceptual and abstract thinking", value: "intuitive" },
                    { text: "Studying research and best practices", desc: "I want evidence-based learning", value: "analytical" },
                    { text: "Learning from mentors and peers", desc: "I learn best through relationships", value: "social" },
                    { text: "Hands-on practice and application", desc: "I learn by doing and experiencing", value: "experiential" }
                ]
            },
            {
                dimension: "intelligence",
                text: "When evaluating options, you focus on:",
                options: [
                    { text: "Future potential and possibilities", desc: "I consider what could be possible", value: "intuitive" },
                    { text: "Risks, benefits, and probabilities", desc: "I weigh pros and cons systematically", value: "analytical" },
                    { text: "Impact on people and relationships", desc: "I consider human consequences", value: "social" },
                    { text: "What has worked in similar situations", desc: "I reference past outcomes and results", value: "experiential" }
                ]
            },
            {
                dimension: "intelligence",
                text: "Your strategic thinking style is:",
                options: [
                    { text: "Visionary and big-picture focused", desc: "I think about future possibilities", value: "intuitive" },
                    { text: "Systematic and evidence-based", desc: "I build strategies on solid analysis", value: "analytical" },
                    { text: "Collaborative and stakeholder-aware", desc: "I consider all affected parties", value: "social" },
                    { text: "Pragmatic and results-oriented", desc: "I focus on what actually works", value: "experiential" }
                ]
            },
            {
                dimension: "intelligence",
                text: "You trust most:",
                options: [
                    { text: "Your inner wisdom and insight", desc: "I rely on my intuitive understanding", value: "intuitive" },
                    { text: "Verified facts and logical reasoning", desc: "I trust objective, rational analysis", value: "analytical" },
                    { text: "Collective wisdom and group input", desc: "I value shared knowledge and perspectives", value: "social" },
                    { text: "Proven track records and results", desc: "I trust what has demonstrated success", value: "experiential" }
                ]
            },
            {
                dimension: "intelligence",
                text: "When facing complex challenges, you:",
                options: [
                    { text: "Step back and see the whole picture", desc: "I look for the underlying patterns", value: "intuitive" },
                    { text: "Break it down into manageable parts", desc: "I use systematic decomposition", value: "analytical" },
                    { text: "Bring together diverse perspectives", desc: "I assemble different viewpoints", value: "social" },
                    { text: "Draw on past successful approaches", desc: "I apply proven problem-solving methods", value: "experiential" }
                ]
            }
        ];

        // Signature combinations mapping (abbreviated)
        const signatures = {
            "action-expressive-flexible-intuitive": "Visionary Catalyst with Innovation Boost - *The Breakthrough Pioneer*",
            "action-expressive-flexible-analytical": "Dynamic Leader with Data Boost - *The Strategic Accelerator*",
            "research-reflective-analytical-analytical": "Deep Analyst with Logic Boost - *The Research Expert*",
            "collaborate-interactive-collaborative-social": "Team Connector with People Boost - *The Community Builder*"
        };

        // Application state
        let currentQuestion = 0;
        let responses = {};
        let userProfile = {};
        let isAssessmentComplete = false;
        let assessmentStarted = false;

        // Tab management
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').classList.add('active') || 
            document.getElementById(tabName + 'TabContent').classList.add('active');
            
            // Update active nav tab
            event.target.classList.add('active');
            
            // Special handling for assessment tab
            if (tabName === 'assessment' && !assessmentStarted && Object.keys(userProfile).length > 0) {
                initializeAssessment();
            }
        }

        // Configuration
        const API_BASE_URL = window.location.hostname === 'localhost' 
            ? 'http://localhost:3001' 
            : 'https://your-backend-url.vercel.app';

        // Profile management
        window.saveProfile = async function() {
            console.log('Save Profile clicked');
            const fullName = document.getElementById('fullName').value;
            const email = document.getElementById('email').value;
            
            if (!fullName || !email) {
                alert('Please fill in required fields (Name and Email)');
                return;
            }
            
            userProfile = {
                fullName: fullName,
                email: email,
                jobTitle: document.getElementById('jobTitle').value,
                company: document.getElementById('company').value,
                industry: document.getElementById('industry').value,
                teamSize: document.getElementById('teamSize').value,
                emailUpdates: document.getElementById('emailUpdates').checked
            };
            
            try {
                // Send to backend
                const response = await fetch(`${API_BASE_URL}/api/users/profile`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(userProfile)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    userProfile.id = result.user.id;
                    localStorage.setItem('amplarii_profile', JSON.stringify(userProfile));
                    displayProfile();
                    setTimeout(() => showAssessmentTab(), 1000);
                } else {
                    alert('Error saving profile: ' + result.error);
                }
            } catch (error) {
                console.error('Profile save error:', error);
                alert('Network error. Please try again.');
            }
        }

        function displayProfile() {
            const initials = userProfile.fullName.split(' ').map(n => n[0]).join('').toUpperCase();
            const jobCompany = [userProfile.jobTitle, userProfile.company].filter(x => x).join(' at ');
            const industryTeam = [userProfile.industry, userProfile.teamSize].filter(x => x).join(' â€¢ ');
            
            document.getElementById('profileAvatar').textContent = initials;
            document.getElementById('displayName').textContent = userProfile.fullName;
            document.getElementById('displayTitle').textContent = jobCompany || 'Professional';
            document.getElementById('displayIndustry').textContent = industryTeam;
            
            document.getElementById('profileForm').classList.add('hidden');
            document.getElementById('profileDisplay').classList.remove('hidden');
        }

        // Other functions need window assignment too
        window.editProfile = function() {
            document.getElementById('profileForm').classList.remove('hidden');
            document.getElementById('profileDisplay').classList.add('hidden');
        }

        function enableAssessment() {
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = `
                <div style="text-align: center; padding: 30px; background: #f8f9fa; border-radius: 15px; margin: 20px 0;">
                    <h3 style="color: #333; margin-bottom: 15px;">Ready to Begin Your Assessment</h3>
                    <p style="color: #666; font-size: 1.1em; margin-bottom: 10px;">
                        <strong>33 questions</strong> â€¢ <strong>~20 minutes</strong>
                    </p>
                    <p style="color: #666; margin-bottom: 25px;">
                        Discover your unique communication signature through our research-backed assessment.
                        Answer honestly for the most accurate results.
                    </p>
                    <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <strong>What you'll learn:</strong><br>
                        â€¢ Your natural communication style<br>
                        â€¢ How you adapt to different situations<br>
                        â€¢ Your unique signature archetype
                    </div>
                </div>
            `;
            document.getElementById('nextBtn').disabled = false;
            document.getElementById('nextBtn').textContent = 'Start Assessment';
        }

        function showAssessmentTab() {
            // Switch to assessment tab
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            
            document.getElementById('assessmentTab').classList.add('active');
            document.querySelectorAll('.nav-tab')[1].classList.add('active'); // Assessment tab
            
            enableAssessment();
        }

        // Assessment functions (same logic as before)
        function initializeAssessment() {
            if (assessmentStarted) return;
            assessmentStarted = true;
            currentQuestion = 0;
            responses = {};
            updateProgress();
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionText').textContent = question.text;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.onclick = () => selectOption(option.value, optionElement);
                
                optionElement.innerHTML = `
                    <div class="option-text">${option.text}</div>
                    <div class="option-desc">${option.desc}</div>
                `;
                
                if (responses[currentQuestion] === option.value) {
                    optionElement.classList.add('selected');
                    document.getElementById('nextBtn').disabled = false;
                }
                
                optionsContainer.appendChild(optionElement);
            });
            
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = !responses[currentQuestion];
            document.getElementById('nextBtn').textContent = currentQuestion === questions.length - 1 ? 'Complete' : 'Next';
        }

        function selectOption(value, element) {
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            responses[currentQuestion] = value;
            document.getElementById('nextBtn').disabled = false;
            
            setTimeout(() => {
                if (currentQuestion < questions.length - 1) {
                    nextQuestion();
                } else {
                    finishAssessment();
                }
            }, 800);
        }

        window.nextQuestion = function() {
            if (!assessmentStarted && Object.keys(userProfile).length > 0) {
                initializeAssessment();
                return;
            }
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                updateProgress();
                showQuestion();
            } else {
                finishAssessment();
            }
        }

        window.previousQuestion = function() {
            if (currentQuestion > 0) {
                currentQuestion--;
                updateProgress();
                showQuestion();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
        }

        function calculateResults() {
            const scores = {
                drive: { action: 0, research: 0, collaborate: 0, optimize: 0 },
                expression: { expressive: 0, reflective: 0, interactive: 0, purposeful: 0 },
                adaptive: { flexible: 0, analytical: 0, collaborative: 0, steady: 0 },
                intelligence: { intuitive: 0, analytical: 0, social: 0, experiential: 0 }
            };

            questions.forEach((question, index) => {
                const response = responses[index];
                if (response && scores[question.dimension]) {
                    scores[question.dimension][response]++;
                }
            });

            const dominantTraits = {};
            Object.keys(scores).forEach(dimension => {
                let maxScore = 0;
                let dominantTrait = '';
                Object.keys(scores[dimension]).forEach(trait => {
                    if (scores[dimension][trait] > maxScore) {
                        maxScore = scores[dimension][trait];
                        dominantTrait = trait;
                    }
                });
                dominantTraits[dimension] = dominantTrait;
            });

            return { scores, dominantTraits };
        }

        async function finishAssessment() {
            const results = calculateResults();
            const signatureKey = `${results.dominantTraits.drive}-${results.dominantTraits.expression}-${results.dominantTraits.adaptive}-${results.dominantTraits.intelligence}`;
            const signature = signatures[signatureKey] || "Unique Communicator - *The Individual Style*";
            
            const assessmentData = {
                email: userProfile.email,
                responses: responses,
                scores: results.scores,
                dominantTraits: results.dominantTraits,
                signature: signature,
                signatureKey: signatureKey
            };
            
            try {
                // Send to backend
                const response = await fetch(`${API_BASE_URL}/api/assessments/results`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(assessmentData)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    localStorage.setItem('amplarii_results', JSON.stringify(assessmentData));
                    
                    // Show results tab and switch to it
                    document.getElementById('resultsTab').style.display = 'block';
                    
                    // Switch to results tab
                    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                    document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
                    
                    document.getElementById('resultsTabContent').classList.add('active');
                    document.getElementById('resultsTab').classList.add('active');
                    
                    displayResults(signature, results.scores);
                } else {
                    alert('Error saving assessment: ' + result.error);
                }
            } catch (error) {
                console.error('Assessment save error:', error);
                alert('Network error saving assessment. Results saved locally.');
                
                // Fallback to local storage and show results
                localStorage.setItem('amplarii_results', JSON.stringify(assessmentData));
                document.getElementById('resultsTab').style.display = 'block';
                
                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
                
                document.getElementById('resultsTabContent').classList.add('active');
                document.getElementById('resultsTab').classList.add('active');
                
                displayResults(signature, results.scores);
            }
        }

        function displayResults(signature, scores) {
            const [title, archetype] = signature.split(' - ');
            document.getElementById('signatureTitle').textContent = title;
            document.getElementById('signatureArchetype').textContent = archetype;
            
            const dimensionScores = document.getElementById('dimensionScores');
            dimensionScores.innerHTML = '';
            
            const dimensionNames = {
                drive: 'Drive Patterns',
                expression: 'Expression Style',
                adaptive: 'Adaptability',
                intelligence: 'Processing Style'
            };
            
            Object.keys(scores).forEach(dimension => {
                const maxScore = Math.max(...Object.values(scores[dimension]));
                const dominantTrait = Object.keys(scores[dimension]).find(trait => scores[dimension][trait] === maxScore);
                
                const dimensionElement = document.createElement('div');
                dimensionElement.className = 'dimension';
                dimensionElement.innerHTML = `
                    <div class="dimension-name">${dimensionNames[dimension]}</div>
                    <div class="dimension-score">${dominantTrait}</div>
                `;
                dimensionScores.appendChild(dimensionElement);
            });
        }

        window.restartAssessment = function() {
            currentQuestion = 0;
            responses = {};
            assessmentStarted = false;
            document.getElementById('resultsTab').style.display = 'none';
            showTab('assessment');
        }

        // Payment functions
        async function purchaseService(serviceType, price) {
            if (Object.keys(userProfile).length === 0) {
                alert('Please create your profile first');
                showTab('profile');
                return;
            }
            
            const serviceNames = {
                'team-assessment': 'Team Assessment Package',
                'coaching-session': '1-on-1 Coaching Session',
                'enterprise-report': 'Enterprise Communication Report'
            };
            
            document.getElementById('serviceTitle').textContent = serviceNames[serviceType];
            document.getElementById('servicePrice').textContent = price;
            document.getElementById('paymentModal').style.display = 'flex';
            
            // Store service info for processing
            window.currentService = { type: serviceType, price: price };
        }

        window.closePaymentModal = function() {
            document.getElementById('paymentModal').style.display = 'none';
        }

        window.processPayment = async function() {
            try {
                // In real implementation, you would integrate with Yoco's frontend SDK
                // For now, simulate a payment token
                const mockToken = 'tok_test_' + Math.random().toString(36).substr(2, 9);
                
                const paymentData = {
                    email: userProfile.email,
                    serviceType: window.currentService.type,
                    amount: window.currentService.price,
                    token: mockToken
                };
                
                const response = await fetch(`${API_BASE_URL}/api/purchases/payment`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(paymentData)
                });
                
                const result = await response.json();
                
                if (response.ok && result.success) {
                    alert('Payment successful! You will receive an email with next steps.');
                    closePaymentModal();
                } else {
                    alert('Payment failed: ' + result.error);
                }
            } catch (error) {
                console.error('Payment error:', error);
                alert('Payment processing failed. Please try again.');
            }
        }

        // Load existing profile on startup
        window.onload = function() {
            const savedProfile = localStorage.getItem('amplarii_profile');
            if (savedProfile) {
                userProfile = JSON.parse(savedProfile);
                
                // Populate form
                document.getElementById('fullName').value = userProfile.fullName || '';
                document.getElementById('email').value = userProfile.email || '';
                document.getElementById('jobTitle').value = userProfile.jobTitle || '';
                document.getElementById('company').value = userProfile.company || '';
                document.getElementById('industry').value = userProfile.industry || '';
                document.getElementById('teamSize').value = userProfile.teamSize || '';
                document.getElementById('emailUpdates').checked = userProfile.emailUpdates || false;
                
                displayProfile();
                enableAssessment();
            }
        };
    </script>
</body>
</html>